<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Comprobante Yikun</title>
<style>
/* ====== ESTILO PÁGINA ====== */
body { 
    font-family: Arial, sans-serif; 
    margin:20px; 
    background:#212838; /* Fondo oscuro principal */
    color:#SAFE7;       /* Texto legible claro */
    font-weight:bold;
}
h2 {
    color:#726EFF; /* Títulos destacados */
}
label {
    display:block;
    margin-bottom:10px;
    color:#SAFE7;
    font-weight:bold;
}
input, select {
    font-weight:bold;
    padding:5px;
    border: 1px solid #374658;
    border-radius:4px;
    background:#212838;
    color:#SAFE7;
}
input::placeholder {
    color:#08C6AB;
}
table { 
    border-collapse: collapse; 
    width:100%; 
    margin-top:10px;
    background:#374658;
    color:#SAFE7;
    font-weight:bold;
}
th, td { 
    border: 1px solid #08C6AB; 
    padding:5px; 
    text-align:left; 
    font-weight:bold;
}
button { 
    margin-top:10px; 
    padding:5px 10px; 
    background:#08C6AB; 
    color:#212838; 
    border:none; 
    cursor:pointer;
    font-weight:bold;
}
button:hover {
    background:#726EFF;
    color:#SAFE7;
}

/* ====== ESTILO COMPROBANTES GENERADOS (MANTENER PALABRAJE ORIGINAL) ====== */
.comprobante { 
    border:1px solid #333; 
    padding:10px; 
    margin-top:20px; 
    width:700px; 
    background:#f5f5f5; 
    color:#333; 
    font-weight:bold; /* letra negrita */
}
.comprobante div[style*="font-weight:bold"] { 
    color:#000; 
    font-size:24px; 
    text-align:center; 
}
.total-pendiente { 
    font-weight:bold; 
    color:#8B0000; 
    font-size:18px; 
    margin-top:10px; 
}
@media print {
    body { background:white; }
    .comprobante { page-break-after:always; width:100%; }
}
</style>
</head>
<body>

<h2>Generar Comprobante</h2>

<label>Cliente/a: <input type="text" id="cliente" placeholder="Ingrese nombre del cliente"></label>

<label>Vendedor: 
<select id="vendedor">
    <option value="03">03 Lucas A.Grafica</option>
    <option value="02">02 Analia A.Papeleria</option>
</select>
</label>

<table id="tabla">
<tr>
    <th>Detalle</th>
    <th>Cantidad</th>
    <th>Precio Unit.</th>
</tr>
</table>
<button onclick="agregarFila()">Agregar Producto</button>

<label>Seña: <input type="number" id="sena" value="0" min="0"></label>

<label>Forma de pago: 
<select id="formaPago">
    <option value="Efectivo">Efectivo</option>
    <option value="Transferencia">Transferencia</option>
</select>
</label>

<label>Descuento:
<select id="descuento">
    <option value="5">5%</option>
    <option value="10">10%</option>
    <option value="15">15%</option>
    <option value="20">20%</option>
</select>
</label>

<button onclick="generar()">Generar Comprobante</button>

<div id="resultado"></div>

<script>
let numero = localStorage.getItem("numeroYikun") || 3281;
numero = parseInt(numero);

function formatoARS(valor){
    return "$" + valor.toLocaleString("es-AR", {minimumFractionDigits:0});
}

function agregarFila(){
    let tabla = document.getElementById("tabla");
    let fila = tabla.insertRow();
    fila.innerHTML = `
    <td><input type="text" class="detalle" placeholder="Producto"></td>
    <td><input type="number" class="cantidad" min="1" value="1"></td>
    <td><input type="number" class="precio" min="0" step="0.01" value="0"></td>
    `;
}
window.onload = agregarFila;

function generar(){
    let cliente = document.getElementById("cliente").value.trim();
    if(cliente === ""){ alert("Ingrese nombre del cliente"); return; }

    let detalles = document.getElementsByClassName("detalle");
    let cantidades = document.getElementsByClassName("cantidad");
    let precios = document.getElementsByClassName("precio");

    let totalPedido = 0;
    let filas = "";

    for(let i=0;i<detalles.length;i++){
        if(detalles[i].value.trim() !== ""){
            let cant = parseFloat(cantidades[i].value || 0);
            let precio = parseFloat(precios[i].value || 0);
            let subtotal = cant * precio;
            totalPedido += subtotal;

            filas += `<tr>
                        <td>${detalles[i].value}</td>
                        <td>${cant} Uni.</td>
                        <td>${formatoARS(precio)}</td>
                    </tr>`;
        }
    }

    if(totalPedido === 0){ alert("Agregue al menos un producto"); return; }

    let sena = parseFloat(document.getElementById("sena").value || 0);
    let porcentaje = parseFloat(document.getElementById("descuento").value);
    let montoDescuento = totalPedido * (porcentaje / 100);
    let totalFinal = totalPedido - montoDescuento;
    let pendiente = totalFinal - sena;
    if(pendiente < 0) pendiente = 0;

    let fechaActual = new Date().toLocaleDateString("es-AR");
    let numeroFormateado = numero.toString().padStart(6,'0');

    let vendedorSeleccionado = document.getElementById("vendedor").value;
    let datosVendedor = "";
    if(vendedorSeleccionado === "03"){
        datosVendedor = `
        Vendedor: 03 Lucas A.Grafica<br>
        Local: Salta Cap. - Ayacucho 1621<br>
        Cel: 3875729428`;
    } else if(vendedorSeleccionado === "02"){
        datosVendedor = `
        Vendedor: 02 Analia A.Papeleria<br>
        Local: Salta Cap. - Ayacucho 1621<br>
        Cel: 3872254054`;
    }

    let formaPago = document.getElementById("formaPago").value;

    let comprobanteHTML = "";
    for(let copia=0;copia<2;copia++){
        comprobanteHTML += `
        <div class="comprobante">
            <div style="font-weight:bold;">Yikun</div>
            <div style="display:flex; justify-content:space-between;">
                <div>Recibo B - ${numeroFormateado}</div>
                <div>Fecha: ${fechaActual}</div>
            </div>
            <p><strong>Cliente/a:</strong> ${cliente}</p>
            <table>
                <tr>
                    <th>Detalle</th>
                    <th>Cantidad</th>
                    <th>Precio Unit.</th>
                </tr>
                ${filas}
            </table>
            <p>Total Pedido: ${formatoARS(totalPedido)}</p>
            <p>Descuento (${porcentaje}%): ${formatoARS(montoDescuento)}</p>
            <p>Seña realizada (${formaPago}): ${formatoARS(sena)}</p>
            <div class="total-pendiente">Total Pendiente: ${formatoARS(pendiente)}</div>
            <hr>
            <p>${datosVendedor}</p>
        </div>
        `;
    }

    document.getElementById("resultado").innerHTML = comprobanteHTML;
    numero++;
    localStorage.setItem("numeroYikun", numero);
}
</script>
</body>
    </html>
